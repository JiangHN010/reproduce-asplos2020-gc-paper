ASPLOS 2020 论文“The Guardian Council: Parallel Programmable Hardware Security”的评估。
==================================================

《监护委员会：并行可编程硬件安全》

硬件先决条件
========================

* x86-64 系统（更多核心将改善整个工作流程的模拟时间）。

软件先决条件
=======================

* Linux 操作系统（我们使用的是 Ubuntu 16.04 和 Ubuntu 18.04）
* SPEC CPU2006 iso 文件，放置在存储库的根目录中（我们使用的是 v1.0），用于完整的工作流程，尽管没有它也可以完成简短的评估。

安装和建造
========================

您可以按如下方式安装此存储库：

```
git clone https://github.com/SamAinsworth/reproduce-asplos2020-gc-paper
```

从这里开始的所有脚本都假定从存储库根目录下的 scripts 目录中运行：

```
cd reproduce-asplos2020-gc-paper
cd scripts
```

要安装软件包依赖项，请运行

```
./dependencies.sh
```

然后，在脚本文件夹中，运行以下命令来编译守护者委员会模拟器和守护者内核：
```
./build.sh
```

要为 Guardian Council 编译 SPEC CPU2006（仅完整评估需要），首先将您的 SPEC .iso 文件（可以使用其他镜像，但需要先修改 build_spec.sh 脚本）放置在仓库的根目录下（与 'PLACE_SPEC_ISO_HERE' 文件相邻）。然后，从脚本目录运行以下命令。

```
./build_spec.sh
```

一旦成功完成此操作，它将为所有基准测试构建和设置运行目录（由于二进制文件是交叉编译的，因此运行本身会失败）。




运行实验工作流程（重现图表）
====================================================

为了快速评估，在除 SPEC 之外的所有内容都构建完成后，从脚本文件中运行以下命令。
```
./run_bitcount.sh
```

这将运行一个简短但具有代表性的开源工作负载，这将对 Guardian Kernels 产生大量的计算需求，并且可以在大约 2 小时内完成。


要进行完整评估，请使用论文中的 SPEC CPU2006 工作负载，运行以下命令

```
./run_spec.sh
```

重新模拟守护者委员会的实验。这需要几天时间，具体时间取决于您系统的内存大小和核心数。默认情况下，只要内存足够，脚本就会并行运行与物理核心数相同的工作负载。要更改此默认设置，请修改 run_spec.sh 文件中的“P”值。

结果验证
====================================================

要生成数据图表，请从脚本文件夹运行以下命令

```
./plot_bitcount.sh
```

或进行全面评估：

```
./plot_spec.sh
```

这将从模拟运行的 m5out/stats.txt 文件中提取数据，并使用 gnuplot 绘制图表。图表将保存在 plots 文件夹中，其数据范围应与论文中图 4 和图 7 的图表大致相似。由于原始论文中未包含比特计数数据，因此我们在 sample_plots 文件夹中提供了示例数据和结果。

原始数据将以 stats*.txt 和 delays*.txt 的形式保存在 spec 或 bitcount 文件夹的运行目录中。


如有任何不清楚的地方，或出现任何意外结果，请向作者报告。

